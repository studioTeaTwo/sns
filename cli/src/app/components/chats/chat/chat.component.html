<div id="container-chat">
  
  <div id="header-chat">
  </div>

  <div id="contents-chat">
    <div #scrollMove class="history-scrollbox" [style.height.px]="height">
      <div ><md-spinner class="history-loading" *ngIf="loadingChatBack$ | async"></md-spinner></div>
    
      <table class="chats">
    
        <tbody *ngFor="let chat of (chats$ | async); let idx = index;">
          
          <!-- 年月日 -->
          <tr *ngIf="isDisplayDate(idx)"><td colspan="3"><hr class="chat-divider chat-divider-date" [attr.data-content]="chat.created | formatToJapaneseDate"></td></tr>
    
          <!-- me -->
          <tr class="myself" *ngIf="chat && chat.senderId === myself.id">
            <td class="chat-column-time">
              <div class="chat-created">{{chat.createdAt | date:'HH:mm'}}</div>
            </td>
            <td class="chat-column-body"><div class="chat-body">{{chat.body}}</div></td>
            <td class="chat-column-avatar"><img class="chat-avatar" [src]="myself.avatarUrl" /></td>
          </tr>
    
          <!-- opponent -->
          <tr class="opponent" *ngIf="chat && isOpponents(chat)">
            <td class="chat-column-avatar"><img class="chat-avatar" [src]="opponents[0].avatarUrl" /></td>
            <td class="chat-column-body"><div class="chat-body">{{chat.body}}</div></td>
            <td class="chat-column-time">
              <div class="chat-read" *ngIf="chat.createdAt <= chatThread.readUntil[0].readUntil">既読</div>
              <div class="chat-created">{{chat.createdAt | date:'HH:mm'}}</div>
            </td>
          </tr>
    
        </tbody>
    
      </table>
    
      <div class="history-unread" *ngIf="isUnread()" (click)="getUnreadChat()">
        <md-icon>expand_more</md-icon>
        <span>未読があります</span>
      </div>
      <div class="history-loading" *ngIf="loadingChatForward$ | async"><md-spinner></md-spinner></div>
    
    </div>
  </div>

  <div id="footer-chat" *ngIf="true">
    <input #replyText placeholder="メッセージを入力してください" class="footer-chat-item footer-chat-replyText" />
    <button md-raised-button color="primary" class="footer-chat-item footer-chat-replyButton" (click)="handleClickReply(replyText.value); replyText.value=''">送信</button>
  </div>

</div>